<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Course</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bcryptjs/2.4.3/bcrypt.min.js"></script>
  <!-- font awesome cdn link  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
  <!-- box icon link -->
  <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <!-- font awesome cdn link  -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css">
 
    <!-- custom css file link  -->
    <link rel="stylesheet" href="css/style.css">
  <style>
    li {
      margin-left: 16px;
    }

    a {
      cursor: pointer;
    }




    .container {
      width: 100%;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 2rem;
    }

    .toolbar {
      padding: 16px;
      background: #eee;
    }

    .toolbar .head {
      display: flex;
      grid-gap: 10px;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }

    .toolbar .head>input {
      max-width: 100px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 2px solid #ddd;
      outline: none;
    }

    .toolbar .head select {
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 6px;
      outline: none;
      cursor: pointer;
    }

    .toolbar .head .color {
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 6px;
      outline: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      grid-gap: 6px;
      padding: 0 10px;
    }

    .toolbar .head .color span {
      font-size: 14px;
    }

    .toolbar .head .color input {
      border: none;
      padding: 0;
      width: 26px;
      height: 26px;
      background: #fff;
      cursor: pointer;
    }

    .toolbar .head .color input::-moz-color-swatch {
      width: 20px;
      height: 20px;
      border: none;
      border-radius: 50%;
    }

    .toolbar .btn-toolbar {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      grid-gap: 10px;
    }

    .toolbar .btn-toolbar button {
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 6px;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .toolbar .btn-toolbar button:hover {
      background: #f3f3f3;
    }

    #content {
      background-color: #f3f3f3;
      padding: 16px;
      font-size: 17px;
      outline: none;
      max-height: 50vh;
      overflow: auto;
    }

    #show-code[data-active="true"] {
      background: #eee;
    }



    .action-container {
      position: absolute;
      bottom: 0;
      right: 0;
      padding: 5px;
      /* Optional: Add padding to the action-container */
      border-radius: 5px;
      /* Optional: Add border-radius for styling */
      display: flex;
      gap: 0.7rem;
    }

    #container-playlist-video {
      margin-bottom: 2rem;
    }

    .inline-btn {
      margin-bottom: 2rem;
    }

    .form-container #addNewCourses{
   background-color: var(--white);
   border-radius: .5rem;
   padding: 2rem;

}

    /* Skeletion loading */
  </style>
  </style>
   
 </head>
<body>
  <div id="success-message" class="success-message"></div>
  <header class="header">

     <section class="flex">

        <a href="home.html" class="logo">UIT-EDU</a>

        <form action="search.html" method="post" class="search-form">
           <input type="text" name="search_box" required placeholder="search courses..." maxlength="100">
           <button type="submit" class="fas fa-search"></button>
        </form>

        <div class="icons">
           <div id="menu-btn" class="fas fa-bars"></div>
           <div id="search-btn" class="fas fa-search"></div>
           <div id="user-btn" class="fas fa-user"></div>
           <div id="toggle-btn" class="fas fa-sun"></div>
        </div>

        <div class="profile">
           <img src="images/pic-1.jpg" class="image" alt="">
           <h3 class="user-name name"></h3>
           <p class="role"></p>
           <a href="profile.html" class="btn">view profile</a>
           <div class="flex-btn">
              <a href="login.html" class="option-btn">logout</a>
           </div>
        </div>

     </section>

  </header>

  <div class="side-bar">

     <div id="close-btn">
        <i class="fas fa-times"></i>
     </div>

     <div class="profile">
        <img src="images/pic-1.jpg" class="image" alt="">
        <h3 class="user-name name"></h3>
        <p class="role"></p>
        <a href="profile.html" class="btn">view profile</a>
     </div>

     <nav class="navbar">
        <a href="home.html" id="homeLink"><i class="fas fa-home"></i><span>Home</span></a>
        <a href="about.html" id="aboutLink"><i class="fas fa-question"></i><span>About</span></a>
        <a href="courses.html" id="coursesLink"><i class="fas fa-graduation-cap"></i><span>Courses</span></a>
        <a href="admin.html" id="teachersLink"><i class="fas fa-chalkboard-user"></i><span>Teachers</span></a>
        <a href="contact.html" id="contactLink"><i class="fas fa-headset"></i><span>Contact
              Us</span></a>
        <a href="edit-post.html" id="editPostLink" style="display: none;"><i
              class="fa-solid fa-pen-to-square"></i><span>Edit Post</span></a>
        <a href="admin.html" id="adminLink" style="display: none;"><i
              class="fa-solid fa-user-tie"></i><span>Admin</span></a>
     </nav>

  </div>

  <section class="form-container">

     <form action="" method="post" enctype="multipart/form-data" id="addNewCourses">
        <h3>Add New Courses</h3>
        <p>add title</p>
        <input type="text" name="title" placeholder="shaikh anas" maxlength="50" class="box">
        <p>add description</p>
        <div class="container" id="container-description">
         <div class="toolbar">
           <div class="head">
             <input type="text" placeholder="Filename" value="untitled" id="filename">
             <select id="fileType" onchange="fileHandle(this.value); this.selectedIndex=0">
               <option value="" selected="" hidden="" disabled="">File</option>
               <option value="txt">Save as txt</option>
               <option value="pdf">Save as pdf</option>
             </select>
             <select onchange="formatDoc('formatBlock', this.value); this.selectedIndex=0;">
               <option value="" selected="" hidden="" disabled="">Format</option>
               <option value="h1">Heading 1</option>
               <option value="h2">Heading 2</option>
               <option value="h3">Heading 3</option>
               <option value="h4">Heading 4</option>
               <option value="h5">Heading 5</option>
               <option value="h6">Heading 6</option>
               <option value="p">Paragraph</option>
             </select>
             <select onchange="formatDoc('fontSize', this.value); this.selectedIndex=0;">
               <option value="" selected="" hidden="" disabled="">Font size</option>
               <option value="1">Extra small</option>
               <option value="2">Small</option>
               <option value="3">Regular</option>
               <option value="4">Medium</option>
               <option value="5">Large</option>
               <option value="6">Extra Large</option>
               <option value="7">Big</option>
             </select>
             <div class="color">
               <span>Color</span>
               <input type="color" oninput="formatDoc('foreColor', this.value); this.value='#000000';">
             </div>
             <div class="color">
               <span>Background</span>
               <input type="color" oninput="formatDoc('hiliteColor', this.value); this.value='#000000';">
             </div>
           </div>
           <!-- <div class="btn-toolbar">
             <button onclick="formatDoc('undo')"><i class='bx bx-undo'></i></button>
             <button onclick="formatDoc('redo')"><i class='bx bx-redo'></i></button>
             <button onclick="formatDoc('bold')"><i class='bx bx-bold'></i></button>
             <button onclick="formatDoc('underline')"><i class='bx bx-underline'></i></button>
             <button onclick="formatDoc('italic')"><i class='bx bx-italic'></i></button>
             <button onclick="formatDoc('strikeThrough')"><i class='bx bx-strikethrough'></i></button>
             <button onclick="formatDoc('justifyLeft')"><i class='bx bx-align-left'></i></button>
             <button onclick="formatDoc('justifyCenter')"><i class='bx bx-align-middle'></i></button>
             <button onclick="formatDoc('justifyRight')"><i class='bx bx-align-right'></i></button>
             <button onclick="formatDoc('justifyFull')"><i class='bx bx-align-justify'></i></button>
             <button onclick="formatDoc('insertOrderedList')"><i class='bx bx-list-ol'></i></button>
             <button onclick="formatDoc('insertUnorderedList')"><i class='bx bx-list-ul'></i></button>
             <button onclick="addLink()"><i class='bx bx-link'></i></button>
             <button onclick="formatDoc('unlink')"><i class='bx bx-unlink'></i></button>
             <button id="show-code" data-active="false">&lt;/&gt;</button>
           </div> -->
         </div>
         <div id="content" contenteditable="true" spellcheck="false">
           Chào mừng bạn đến với khóa học HTML cơ bản! Khám phá thế giới của lập trình web và thiết kế trang web bằng
           cách học HTML, ngôn ngữ đánh dấu mạnh mẽ và quan trọng nhất. Trong khóa học này, bạn sẽ học cách tạo ra trang
           web từ đầu bằng cách sử dụng các thẻ, thuộc tính và cú pháp HTML.\n\nTừ việc tạo cấu trúc cơ bản của trang web
           đến việc nhúng hình ảnh, video và liên kết, bạn sẽ có cơ hội thực hành và áp dụng kiến thức ngay tại chỗ. Đồng
           thời, chúng tôi sẽ chia sẻ những chiến lược tốt nhất để tối ưu hóa trang web của bạn cho trải nghiệm người
           dùng tốt nhất.\n\nKhông cần kinh nghiệm trước đây, khóa học này dành cho tất cả mọi người muốn bắt đầu hành
           trình của mình trong lập trình web. Hãy sẵn sàng tham gia vào hành trình sáng tạo và khám phá tiềm năng không
           giới hạn của bạn trong thế giới web phát triển với khóa học HTML này!
         </div>
       </div>
        <p>add thumbnail</p>
        <div style="display: flex; flex-direction: row; justify-content: space-between;">
          <input type="file" accept="image/*" class="box" id="thumbnail-courses-input">
          <input readonly type="submit-image" value="upload image" name="submit-image" class="btn" style="width: 20rem; height: 5.5rem;">
        </div>
        

        <input type="submit" value="update profile" name="submit" class="btn">
        <div id="error-message"></div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
        integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
        integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
     </form>

  </section>

  <script src="src/add-course.js"></script>





















     <!-- custom js file link  -->
     <script src="js/script.js"></script>
     <script>
      document.addEventListener('DOMContentLoaded', function () {
         // Retrieve the data from localStorage when screen init
         const encodedData = localStorage.getItem('userLoginData');
         let userRole;
         //console.log(encodedData);
         if (encodedData) {
            const decodedData = JSON.parse(decodeURIComponent(encodedData));
            userRole = decodedData.role
            // Use the data as needed
            //console.log('User Data:', decodedData);
   
            // Display the user's name
            const welcomeMessages = document.getElementsByClassName('user-name');
            for (const welcomeMessage of welcomeMessages) {
               welcomeMessage.textContent = `${decodedData.name}`;
            }
   
            const userRoleDisplay = document.getElementsByClassName('role');
            for (const role of userRoleDisplay) {
               role.textContent = `${decodedData.role}`
            }
            localStorage.setItem('userId', decodedData._id);
   
   
            // Hide links for non-admin users
            if (userRole === 'student') {
               document.getElementById('aboutLink').style.display = 'flex';
               document.getElementById('coursesLink').style.display = 'flex';
            } else {
               document.getElementById('editPostLink').style.display = 'flex';
               document.getElementById('aboutLink').style.display = 'flex';
               document.getElementById('coursesLink').style.display = 'flex';
               document.getElementById('adminLink').style.display = 'flex';
            }
         } else {
            // If no data found, handle accordingly
            console.error('No user data found in localStorage.');
         }







         
         //=============== Handle submit form
         const form = document.getElementById('addNewCourses');

         form.addEventListener('submit', async function (e) {
            e.preventDefault();


            const thumbnail = document.getElementById('thumbnail-courses-input');
            const title = form.querySelector('[name="title"]').value;
            const description = document.getElementById('content');
            

            const formData = new FormData();
            formData.append('thumbnailFile', thumbnail.files[0]);
            formData.append('title', title.value);
            formData.append('description', description.value);
            formData.append('category', '658b512ca1707b8e2fd0ef5d');
            try {
               const response = await fetch('https://uit-edu.onrender.com/api/courses', {
                  method: 'POST',
                  'Access-Token': accessToken,
                  'Refresh-Token': refreshToken,
                  body: formData,
               })
            } catch (error) {
               console.error(error);
            }
         });

      });
   
      // Check if the input data is valid JSON
      function isValidJson(data) {
         try {
            JSON.parse(data);
            return true;
         } catch (error) {
            return false;
         }
      }

   </script>
</body>
</html>